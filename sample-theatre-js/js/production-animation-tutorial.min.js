async function restoreProjectState(e){const t=await apex.server.process("RESTORE_PROJECT_STATE",{pageItems:"#P1_PROJECT_ID"}),o=JSON.parse(t.state);apex.debug.info("projectState: ",o);const a=prepareProject(core,e,o),n=a.project,r=a.sheet;n.ready.then(()=>{apex.debug.info("project is ready",n),r.sequence.play({iterationCount:1/0})})}import"https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-only.min.js";import prepareProject from"./project.js";const{core:core}=Theatre,projectId=apex.item("P1_PROJECT_ID").getValue();apex.debug.info("projectId: ",projectId);const channel=new BroadcastChannel("control-theatre");channel.addEventListener("message",e=>{apex.debug.info("status: ",e),"status"===e.data.type&&apex.item("P1_STATUS").setValue(e.data.message)});const controlElement=document.getElementById("CONTROLS"),controls=apex.actions.createContext("controls",controlElement);controls.add([{name:"EXPORT",action:(e,t,o)=>{channel.postMessage({type:"export"})}},{name:"RELOAD",action:(e,t,o)=>{window.location.reload(),apex.item("P1_STATUS").setValue(null)}},{name:"IMPORT",action:(e,t,o)=>{restoreProjectState(projectId),apex.item("P1_STATUS").setValue("projectState is restored.")}}]);