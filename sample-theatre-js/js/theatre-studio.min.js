import"https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.7.2/dist/core-and-studio.js";const{core:core,studio:studio}=Theatre,projectId=apex.item("P2_PROJECT_ID").getValue();apex.debug.info("projectId: ",projectId),studio.initialize();const project=core.getProject(projectId),sheet=project.sheet("Sheet 1"),obj=sheet.object("Heading 1",{y:0,opacity:core.types.number(1,{range:[0,1]})}),articleHeadingElement=document.getElementById("article-heading");obj.onValuesChange(e=>{articleHeadingElement.style.transform=`translateY(${e.y}px)`,articleHeadingElement.style.opacity=e.opacity});const channel=new BroadcastChannel("control-theatre");channel.addEventListener("message",e=>{if(apex.debug.info("event: ",e),"export"===e.data.type){const e=studio.createContentOfSaveFile(projectId);apex.debug.info("projectState: ",e),apex.item("P2_PROJECT_STATE").setValue(JSON.stringify(e)),apex.server.process("SAVE_PROJECT_STATE",{pageItems:"#P2_PROJECT_ID,#P2_PROJECT_STATE"},{success:e=>{apex.debug.info(e),channel.postMessage({type:"status",message:e.message})}})}});